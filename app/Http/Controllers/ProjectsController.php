<?php

// Обычное пространство имен контроллеров
// Это публичная часть сайта
namespace App\Http\Controllers;

use App\Models\Project; // Модель проектов портфолио

// Контроллер для публичной страницы с проектами
// Тут всего один метод - показать список всех проектов
class ProjectsController extends Controller
{
    // Метод показывает страницу портфолио со всеми проектами
    // Проекты разбиты по категориям: большие, образовательные, другие
    public function index()
    {
        // Получаем только опубликованные проекты из базы
        // where('published', true) скрывает черновики и неопубликованные проекты
        // latest() сортирует по дате создания (новые сверху)
        // get() загружает все записи
        // groupBy('category') группирует проекты по категориям (big, educational, other)
        // В результате получаем массив вида: ['big' => [проекты], 'educational' => [проекты], ...]
        // Это удобно для отображения проектов в разных секциях на странице
        $projects = Project::where('published', true)
            ->latest()
            ->get()
            ->groupBy('category');

        // Возвращаем view projects.blade.php с данными
        // В шаблоне будет доступна переменная $projects (сгруппированная по категориям)
        return view('projects', compact('projects'));
    }
}
